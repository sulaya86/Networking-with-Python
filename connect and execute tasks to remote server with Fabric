"""Fabric is a useful module to automate task remotely, 
here you will find some simple examples of usage"""

#This script interacts with a windows machine and a linux machine
# The purpose is to automate the retrieving a list of files (windows) from a server (linux)
# by executing remotely an script that will download the files from the backup system.
# Wait for the script to finish, pick up the files and copy to the local (windows) machine. 
# Every step is a task in Fabric.


from fabric.api import task, env, run, settings, cd, put, get, execute, local

# For ftp connection through fabric
env.hosts = ['your dns']
env.user = 'user'  # default is the local user
env.password = 'password'  # can be used both for SSH authentication and sudo
env.skip_bad_hosts = True #Sometimes one of your remote hosts is not reachable.
env.warn_only = True


@task
def deploy():
    '''
    Execute workflow tasks
    '''
    logmonitor.log('*** Connected to host ' + str(env.hosts))
    execute(push)
    execute(clean_directory)
    execute(multiple_extraction)
    execute(move_to_output)
    execute(check_files)
    execute(send_files)
